<head>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <!-- Angular Material style sheet -->
    <!--<link rel="stylesheet" href="./bower_components/angular-material/angular-material.min.css">-->

    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
    <!--<link href="./css/style.css" rel="stylesheet">-->

</head>

<body ng-controller="DiningCtrl" ng-cloak>

    <md-sidenav
            class="md-sidenav-left"
            md-component-id="left"
            md-whiteframe="4">
        <md-toolbar class="md-theme-indigo">
            <h1 ng-if="getUserName() != undefined" class="md-toolbar-tools">{{getUserName()}}</h1>
            <h1 ng-if="getUserName() == undefined" class="md-toolbar-tools">User</h1>
        </md-toolbar>
        <md-content layout-padding ng-controller="LeftCtrl">
            <md-button ng-if="getUserID() == -1 || getUserID() == undefined" href="#!/login" class="md-accent">
                Login
            </md-button>
            <md-button ng-if="getUserID() != -1 && getUserID() != undefined" ng-click="logout()" class="md-accent">
                Logout
            </md-button>
            <br/>
            <md-button ng-click="toggleLeft()" class="md-accent">
                Close this Sidenav
            </md-button>
        </md-content>
    </md-sidenav>

    <md-toolbar class="md-hue-2" ng-show="!showSearch">
        <div class="md-toolbar-tools">
            <md-button class="md-icon-button" ng-click="toggleLeft()" aria-label="Menu">
                <md-icon aria-label="Menu" class="material-icons">menu</md-icon>
                <!--<md-icon md-svg-icon="img/icons/menu.svg"></md-icon>-->
            </md-button>
            <h2>
                <span> Dining Menu </span>
            </h2>
            <span flex></span>
            <!--<md-button class="md-icon-button" aria-label="Favorite">-->
            <!--<md-icon aria-label="Favorite" class="material-icons">favorite</md-icon>-->
            <!--</md-button>-->
            <md-button ng-click="showSearch = !showSearch" class="md-icon-button" aria-label="More">
                <md-icon aria-label="Search" class="material-icons">search</md-icon>
            </md-button>
            <md-datepicker ng-model="selectedDate" md-placeholder="Enter date"></md-datepicker>
        </div>
    </md-toolbar>

    <md-toolbar class="md-hue-2" ng-show="showSearch">
        <div class="md-toolbar-tools">
            <md-button ng-click="showSearch = !showSearch" aria-label="Back">
                <md-icon size="64" class="material-icons">keyboard_backspace</md-icon>
            </md-button>
            <md-input-container md-theme="input" flex layout-align=" end">
                <label>&nbsp;</label>
                <input ng-model="searchString" ng-model-options="{ debounce: 1000 }" placeholder="enter search">
            </md-input-container>
            <md-button aria-label="Search" ng-click="showSearch = !showSearch">
                <ng-md-icon icon="search"></ng-md-icon>
            </md-button>
            <md-button aria-label="Open Settings" ng-click="showListBottomSheet($event)">
                <ng-md-icon icon="more_vert"></ng-md-icon>
            </md-button>
        </div>

    </md-toolbar>

    <div ng-show="!showSearch">
        <md-tabs md-selected="selectedIndex" md-dynamic-height md-border-bottom md-autoselect>
            <md-tab ng-repeat="tab in tabs"
                    ng-disabled="tab.disabled"
                    label="{{tab.title}}">

                <md-progress-linear md-mode="indeterminate" ng-hide="!showSpinner"></md-progress-linear>

                <md-content class="menu-container" layout="row" ng-hide="showSpinner">
                    <!--<div flex-xs flex-gt-xs="33" layout="column" ng-repeat="(key, value) in mealData">-->
                    <div class="md-padding" flex="33" flex-xs="100" flex-sm="50" ng-repeat="(key, value) in mealData">
                        <!--<img ng-src="{{imagePath}}" class="md-card-image" alt="Washed Out">-->
                        <div class="my-card md-padding">
                            <md-card-title>
                                <md-card-title-text>
                                    <span class="md-headline">{{key}}</span>
                                </md-card-title-text>
                            </md-card-title>
                            <md-card-content>
                                <!--ng-controller="ListCtrl"-->
                                <br>
                                <md-list ng-cloak>
                                            <span ng-repeat="$index in value">
                                                <md-subheader class="md-no-sticky theme-purdue">{{value[$index].Name}}</md-subheader>
                                                <md-list-item ng-repeat="item in value[$index].Items">
                                                <p> {{ item.Name }} </p>
                                                <md-button class="md-icon-button">
                                                    <md-icon aria-label="Favorites" class="material-icons">favorites</md-icon>
                                                </md-button>
                                            </md-list-item>
                                            </span>
                                </md-list>
                            </md-card-content>
                        </div>
                    </div>
                    <!--</div>-->
                </md-content>
            </md-tab>
        </md-tabs>
    </div>

    <div ng-show="showSearch">
        <br>
        <br>
       <span ng-show="lastSearchString != '' "> Showing results for <strong> {{lastSearchString}}</strong> </span>
        <br>
        <div ng-show="featureNotSupported && searchResult != undefined">Feature not Supported</div>
        <div ng-show="!featureNotSupported" flex="50" ng-repeat="item in searchResult" class="search-item">
            <md-toolbar class="theme-purdue">
                <div class="md-toolbar-tools">
                    <h3 >{{item.FoodName}}</h3>
                    <span flex="" class="flex"></span>
                    Today
                    <span ng-show="!item.itemDetails"><md-icon size="64" class="material-icons clickable" ng-click="item.itemDetails = true">expand_more</md-icon></span>
                    <span ng-show="item.itemDetails"><md-icon size="64" class="material-icons clickable" ng-click="item.itemDetails = false">expand_less</md-icon></span>
                </div>
            </md-toolbar>
            <md-content layout-padding>
                <p>
                    <md-chips>
                        <md-chip>{{item.DiningCourt}}</md-chip>
                        <md-chip ng-show="item.Breakfast == 1">Breakfast</md-chip>
                        <md-chip ng-show="item.Lunch == 1">Lunch</md-chip>
                        <md-chip ng-show="item.Dinner == 1">Dinner</md-chip>
                        <md-chip>{{item.Station}}</md-chip>
                    </md-chips>
                </p>
                <p ng-show="item.itemDetails">
                    <strong> Calcium:             </strong>  {{item.Calcium}} <br>
                    <strong> Shellfish:           </strong>  {{item.Shellfish}}<br>
                    <strong> Iron:                </strong>  {{item.Iron}}<br>
                    <strong> Eggs:                </strong>  {{item.Eggs}}<br>
                    <strong> Vitamin A:           </strong>  {{item['Vitamin A']}}<br>
                    <strong> Vitamin C:           </strong>  {{item['Vitamin C']}}<br>
                    <strong> Dietary Fiber:       </strong>  {{item['Dietary Fiber']}}<br>
                    <strong> Fish:                </strong>  {{item.Fish}}<br>
                    <strong> Serving Size:        </strong>  {{item['Serving Size']}}<br>
                    <strong> Gluten:              </strong>  {{item.Gluten}}<br>
                    <strong> Sugar:               </strong>  {{item.Sugar}}<br>
                    <strong> Milk:                </strong>  {{item.Milk}}<br>
                    <strong> Peanuts:             </strong>  {{item.Peanuts}}<br>
                    <strong> Saturated fat:       </strong>  {{item['Saturated fat']}}<br>
                    <strong> Total fat:           </strong>  {{item['Total fat']}}<br>
                    <strong> Calories:            </strong>  {{item.Calories}}<br>
                    <strong> Cholesterol:         </strong>  {{item.Cholesterol}}<br>
                    <strong> Protein:             </strong>  {{item.Protein}}<br>
                    <strong> Tree_nuts:           </strong>  {{item.Tree_nuts}}<br>
                    <strong> Calories from fat:   </strong>  {{item['Calories from fat']}}<br>
                    <strong> Sodium:              </strong>  {{item.Sodium}}<br>
                    <strong> Total Carbohydrate:  </strong>  {{item['Total Carbohydrat']}}<br>
                    <strong> Veg:                 </strong>  {{item.Veg}}<br>
                    <strong> Soy:                 </strong>  {{item.Soy}}<br>
                    <strong> Wheat:               </strong>  {{item.Wheat}}
                </p>
            </md-content>
        </div>
    </div>

</body>
